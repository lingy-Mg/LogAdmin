# ğŸš€ å…¨è‡ªåŠ¨ä¸€é”®éƒ¨ç½²

## ğŸ’¡ ç‰¹æ€§

è¿™æ˜¯ä¸€ä¸ª**å®Œå…¨è‡ªåŠ¨åŒ–**çš„éƒ¨ç½²ç³»ç»Ÿï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤å³å¯å®Œæˆä»æ„å»ºåˆ°å‘å¸ƒçš„æ‰€æœ‰æ­¥éª¤ï¼š

âœ… **è‡ªåŠ¨æ£€æŸ¥ä¾èµ–** - æ£€æµ‹å¹¶å®‰è£…ç¼ºå¤±çš„ä¾èµ–  
âœ… **è‡ªåŠ¨æ¸…ç†** - æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶  
âœ… **è‡ªåŠ¨æ„å»º** - ç¼–è¯‘å‰ç«¯ Vue é¡¹ç›®  
âœ… **è‡ªåŠ¨æ‰“åŒ…** - æ‰“åŒ…æ‰€æœ‰éœ€è¦çš„æ–‡ä»¶  
âœ… **è‡ªåŠ¨ä¸Šä¼ ** - ä¸Šä¼ åˆ°æœåŠ¡å™¨  
âœ… **è‡ªåŠ¨éƒ¨ç½²** - åœ¨æœåŠ¡å™¨ä¸Šè§£å‹å’Œå®‰è£…  
âœ… **è‡ªåŠ¨é‡å¯** - é‡å¯ Docker å®¹å™¨  
âœ… **è‡ªåŠ¨éªŒè¯** - éªŒè¯éƒ¨ç½²æ˜¯å¦æˆåŠŸ  

## ğŸ¯ ä¸€é”®éƒ¨ç½²

### æ–¹æ³• 1ï¼šä½¿ç”¨æ‰¹å¤„ç†æ–‡ä»¶ï¼ˆæ¨èï¼‰
åŒå‡»è¿è¡Œ `deploy.bat`

### æ–¹æ³• 2ï¼šä½¿ç”¨ npm å‘½ä»¤
```bash
npm run deploy
```

### æ–¹æ³• 3ï¼šç›´æ¥è¿è¡Œè„šæœ¬
```bash
node scripts/deploy-auto.js
```

## ğŸ“‹ éƒ¨ç½²æµç¨‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘      ğŸš€ LogAdmin å…¨è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿ              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ éƒ¨ç½²ä¿¡æ¯ï¼š
   æœåŠ¡å™¨: root@aliyun.18638642193.cn
   è·¯å¾„: /root/www/admin_log
   å®¹å™¨: admin_log

â“ ç¡®è®¤å¼€å§‹è‡ªåŠ¨éƒ¨ç½²? (y/N): y

==================================================
å¼€å§‹å…¨è‡ªåŠ¨éƒ¨ç½²æµç¨‹...
==================================================

ğŸ“¦ [1/10] æ¸…ç†æ—§çš„æ„å»ºæ–‡ä»¶...
   âœ… æ¸…ç†å®Œæˆ

ğŸ“š [2/10] æ£€æŸ¥å¹¶å®‰è£…ä¾èµ–...
   âœ“ åç«¯ä¾èµ–å·²å®‰è£…
   âœ“ å‰ç«¯ä¾èµ–å·²å®‰è£…
   âœ… ä¾èµ–æ£€æŸ¥å®Œæˆ

ğŸ”¨ [3/10] æ„å»ºå‰ç«¯é¡¹ç›®...
   âœ… å‰ç«¯æ„å»ºå®Œæˆ

ğŸ“‹ [4/10] å¤åˆ¶æ„å»ºæ–‡ä»¶åˆ°åç«¯...
   âœ… æ–‡ä»¶å¤åˆ¶å®Œæˆ

ğŸ”‘ [5/10] æ£€æŸ¥ SSH å¯†é’¥...
   âœ… SSH å¯†é’¥æ£€æŸ¥é€šè¿‡

ğŸ“¦ [6/10] åˆ›å»ºéƒ¨ç½²åŒ…...
   âœ… éƒ¨ç½²åŒ…åˆ›å»ºå®Œæˆ (2.34 MB)

ğŸš¢ [7/10] ä¸Šä¼ åˆ°æœåŠ¡å™¨...
   åˆ›å»ºè¿œç¨‹ç›®å½•...
   ä¸Šä¼ éƒ¨ç½²åŒ…...
   âœ… ä¸Šä¼ å®Œæˆ

âš™ï¸  [8/10] åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²...
   è§£å‹æ–‡ä»¶...
   å®‰è£…ä¾èµ–...
   éƒ¨ç½²å®Œæˆ
   âœ… æœåŠ¡å™¨éƒ¨ç½²å®Œæˆ

ğŸ³ [9/10] é‡å¯ Docker å®¹å™¨...
   å®¹å™¨é‡å¯ä¸­ï¼Œç­‰å¾…å¯åŠ¨...
   âœ… å®¹å™¨é‡å¯å®Œæˆ

âœ“  [10/10] éªŒè¯éƒ¨ç½²...
   âœ… å®¹å™¨è¿è¡Œæ­£å¸¸: Up 3 seconds

==================================================
âœ¨ éƒ¨ç½²æˆåŠŸï¼

ğŸ“Š éƒ¨ç½²ä¿¡æ¯:
   ğŸŒ è®¿é—®åœ°å€: http://aliyun.18638642193.cn
   ğŸ³ å®¹å™¨åç§°: admin_log
   ğŸ“‚ éƒ¨ç½²è·¯å¾„: /root/www/admin_log

ğŸ“ åç»­æ“ä½œ:
   æŸ¥çœ‹å®¹å™¨çŠ¶æ€: npm run server status
   æŸ¥çœ‹å®¹å™¨æ—¥å¿—: npm run server logs
   å®æ—¶æŸ¥çœ‹æ—¥å¿—: npm run server logs:live
==================================================
```

## ğŸ® å®Œæ•´çš„å‘½ä»¤åˆ—è¡¨

### éƒ¨ç½²ç›¸å…³
```bash
# å…¨è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰
npm run deploy

# ç®€å•éƒ¨ç½²ï¼ˆè·³è¿‡ä¾èµ–æ£€æŸ¥ï¼‰
npm run deploy:simple

# æ£€æŸ¥éƒ¨ç½²ç¯å¢ƒ
npm run deploy:check
```

### æœåŠ¡å™¨ç®¡ç†
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
npm run server status

# æŸ¥çœ‹æ—¥å¿—
npm run server logs          # æœ€è¿‘ 50 è¡Œ
npm run server logs:live     # å®æ—¶æ—¥å¿—

# ç®¡ç†å®¹å™¨
npm run server start         # å¯åŠ¨
npm run server stop          # åœæ­¢
npm run server restart       # é‡å¯

# è¿›å…¥å®¹å™¨
npm run server exec

# è¿æ¥æœåŠ¡å™¨
npm run server ssh
```

### æœ¬åœ°å¼€å‘
```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
npm run install:all

# æœ¬åœ°å¼€å‘
npm run dev:backend          # å¯åŠ¨åç«¯
npm run dev:frontend         # å¯åŠ¨å‰ç«¯

# åªæ„å»ºå‰ç«¯
npm run build

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean
```

## ğŸ” éƒ¨ç½²æ­¥éª¤è¯¦è§£

### æ­¥éª¤ 1: æ¸…ç†æ—§æ„å»º
åˆ é™¤ `backend/public` å’Œ `frontend/dist` ç›®å½•

### æ­¥éª¤ 2: æ£€æŸ¥ä¾èµ–
- æ£€æŸ¥åç«¯ `node_modules` æ˜¯å¦å­˜åœ¨
- æ£€æŸ¥å‰ç«¯ `node_modules` æ˜¯å¦å­˜åœ¨
- è‡ªåŠ¨å®‰è£…ç¼ºå¤±çš„ä¾èµ–

### æ­¥éª¤ 3: æ„å»ºå‰ç«¯
æ‰§è¡Œ `npm run build:frontend`ï¼Œç¼–è¯‘ Vue é¡¹ç›®

### æ­¥éª¤ 4: å¤åˆ¶æ–‡ä»¶
å°† `frontend/dist` å¤åˆ¶åˆ° `backend/public`

### æ­¥éª¤ 5: æ£€æŸ¥ SSH
éªŒè¯ SSH å¯†é’¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

### æ­¥éª¤ 6: åˆ›å»ºéƒ¨ç½²åŒ…
æ‰“åŒ…ä»¥ä¸‹æ–‡ä»¶ï¼š
- `backend/src/` - åç«¯æºç 
- `backend/public/` - å‰ç«¯æ„å»ºæ–‡ä»¶
- `backend/package.json` - åç«¯ä¾èµ–é…ç½®
- `backend/package-lock.json` - ä¾èµ–é”å®šæ–‡ä»¶
- `package.json` - æ ¹é…ç½®

### æ­¥éª¤ 7: ä¸Šä¼ 
é€šè¿‡ SSH/SCP ä¸Šä¼  tar.gz åŒ…åˆ°æœåŠ¡å™¨

### æ­¥éª¤ 8: æœåŠ¡å™¨éƒ¨ç½²
åœ¨æœåŠ¡å™¨ä¸Šï¼š
1. è§£å‹æ–‡ä»¶
2. åˆ é™¤éƒ¨ç½²åŒ…
3. å®‰è£…ç”Ÿäº§ä¾èµ– `npm install --production`

### æ­¥éª¤ 9: é‡å¯å®¹å™¨
æ‰§è¡Œ `docker restart admin_log`ï¼Œç­‰å¾… 3 ç§’è®©å®¹å™¨å®Œå…¨å¯åŠ¨

### æ­¥éª¤ 10: éªŒè¯
æ£€æŸ¥å®¹å™¨è¿è¡ŒçŠ¶æ€ï¼Œç¡®ä¿éƒ¨ç½²æˆåŠŸ

## â±ï¸ é¢„è®¡æ—¶é—´

æ ¹æ®ç½‘ç»œé€Ÿåº¦å’Œé¡¹ç›®å¤§å°ï¼š
- **æœ¬åœ°æ„å»º**: 30ç§’ - 2åˆ†é’Ÿ
- **ä¸Šä¼ **: 10ç§’ - 1åˆ†é’Ÿ
- **æœåŠ¡å™¨éƒ¨ç½²**: 30ç§’ - 2åˆ†é’Ÿ
- **æ€»è®¡**: çº¦ 2-5 åˆ†é’Ÿ

## ğŸ†š ä¸¤ç§éƒ¨ç½²æ–¹å¼å¯¹æ¯”

### å…¨è‡ªåŠ¨éƒ¨ç½²ï¼ˆdeployï¼‰
```bash
npm run deploy
```
âœ… å®Œæ•´çš„ 10 æ­¥æµç¨‹  
âœ… è‡ªåŠ¨æ£€æŸ¥å’Œå®‰è£…ä¾èµ–  
âœ… è¯¦ç»†çš„è¿›åº¦æ˜¾ç¤º  
âœ… è‡ªåŠ¨éªŒè¯éƒ¨ç½²  
âœ… é€‚åˆæ—¥å¸¸ä½¿ç”¨  

### ç®€å•éƒ¨ç½²ï¼ˆdeploy:simpleï¼‰
```bash
npm run deploy:simple
```
âœ… æ›´å¿«é€Ÿï¼ˆ5æ­¥æµç¨‹ï¼‰  
âœ… è·³è¿‡ä¾èµ–æ£€æŸ¥  
âœ… é€‚åˆé¢‘ç¹éƒ¨ç½²  
âš ï¸ éœ€è¦æ‰‹åŠ¨ç¡®ä¿ä¾èµ–å·²å®‰è£…  

## ğŸ¬ ä½¿ç”¨åœºæ™¯

### ç¬¬ä¸€æ¬¡éƒ¨ç½²
```bash
npm run deploy:check        # æ£€æŸ¥ç¯å¢ƒ
npm run deploy              # å…¨è‡ªåŠ¨éƒ¨ç½²
```

### æ—¥å¸¸æ›´æ–°
```bash
npm run deploy              # å…¨è‡ªåŠ¨éƒ¨ç½²
```

### ç´§æ€¥ä¿®å¤
```bash
npm run deploy:simple       # å¿«é€Ÿéƒ¨ç½²
```

### è°ƒè¯•é—®é¢˜
```bash
npm run server logs         # æŸ¥çœ‹æ—¥å¿—
npm run server exec         # è¿›å…¥å®¹å™¨
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### éƒ¨ç½²å‰
- âœ… ç¡®ä¿ä»£ç å·²æäº¤åˆ°æœ¬åœ° Gitï¼ˆå»ºè®®ï¼‰
- âœ… ç¡®ä¿æœ¬åœ°æµ‹è¯•é€šè¿‡
- âœ… ç¡®ä¿ SSH å¯†é’¥é…ç½®æ­£ç¡®

### éƒ¨ç½²ä¸­
- â¸ï¸ ä¸è¦ä¸­æ–­éƒ¨ç½²è¿‡ç¨‹
- â¸ï¸ ç­‰å¾…å®¹å™¨å®Œå…¨å¯åŠ¨ï¼ˆçº¦3ç§’ï¼‰
- â¸ï¸ éƒ¨ç½²æœŸé—´æœåŠ¡ä¼šçŸ­æš‚ä¸­æ–­

### éƒ¨ç½²å
- âœ… æ£€æŸ¥å®¹å™¨çŠ¶æ€ `npm run server status`
- âœ… æŸ¥çœ‹æ—¥å¿—æ˜¯å¦æœ‰é”™è¯¯ `npm run server logs`
- âœ… æµ‹è¯•åº”ç”¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸

## ğŸ› å¸¸è§é—®é¢˜

### 1. éƒ¨ç½²å¤±è´¥ï¼Œå¦‚ä½•å›æ»šï¼Ÿ
å…¨è‡ªåŠ¨éƒ¨ç½²å¤±è´¥æ—¶ï¼Œæ—§ç‰ˆæœ¬ä»åœ¨è¿è¡Œã€‚åªéœ€ä¿®å¤é—®é¢˜åé‡æ–°éƒ¨ç½²å³å¯ã€‚

### 2. å¦‚ä½•æŸ¥çœ‹è¯¦ç»†é”™è¯¯ï¼Ÿ
```bash
npm run server logs
```

### 3. å®¹å™¨æ— æ³•å¯åŠ¨ï¼Ÿ
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
npm run server status

# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
npm run server logs

# æ‰‹åŠ¨é‡å¯å®¹å™¨
npm run server restart
```

### 4. ä¾èµ–å®‰è£…å¤±è´¥ï¼Ÿ
```bash
# åˆ é™¤æœ¬åœ°ä¾èµ–é‡æ–°å®‰è£…
rm -rf backend/node_modules frontend/node_modules
npm run install:all
```

### 5. ä¸Šä¼ é€Ÿåº¦æ…¢ï¼Ÿ
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- è€ƒè™‘ä½¿ç”¨æ›´å¿«çš„æœåŠ¡å™¨
- ä¼˜åŒ–æ‰“åŒ…æ–‡ä»¶å¤§å°

## ğŸ¯ æœ€ä½³å®è·µ

### å¼€å‘æµç¨‹
1. **æœ¬åœ°å¼€å‘** â†’ `npm run dev:frontend` + `npm run dev:backend`
2. **æœ¬åœ°æµ‹è¯•** â†’ ç¡®ä¿åŠŸèƒ½æ­£å¸¸
3. **æäº¤ä»£ç ** â†’ Git commit
4. **ä¸€é”®éƒ¨ç½²** â†’ `npm run deploy`
5. **éªŒè¯éƒ¨ç½²** â†’ `npm run server status`

### éƒ¨ç½²é¢‘ç‡
- **å¼€å‘æœŸ**: æ¯å¤© 1-3 æ¬¡
- **æµ‹è¯•æœŸ**: æ¯å‘¨ 2-5 æ¬¡
- **ç”Ÿäº§æœŸ**: æŒ‰éœ€éƒ¨ç½²

### å®‰å…¨å»ºè®®
- ğŸ”’ ä¸è¦å°† `deploy.config.json` æäº¤åˆ° Git
- ğŸ”’ å®šæœŸæ›´æ¢ SSH å¯†é’¥
- ğŸ”’ ä½¿ç”¨å¼ºå¯†ç ä¿æŠ¤æœåŠ¡å™¨
- ğŸ”’ å®šæœŸå¤‡ä»½æ•°æ®

## ğŸ“ è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
npm run

# æŸ¥çœ‹æœåŠ¡å™¨ç®¡ç†å‘½ä»¤
npm run server

# æ£€æŸ¥éƒ¨ç½²ç¯å¢ƒ
npm run deploy:check
```

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨å°±å¼€å§‹ä½“éªŒä¸€é”®éƒ¨ç½²çš„ä¾¿æ·å§ï¼

```bash
npm run deploy
```

åªéœ€ä¸€ä¸ªå‘½ä»¤ï¼Œå®Œæˆæ‰€æœ‰éƒ¨ç½²å·¥ä½œï¼ğŸš€
